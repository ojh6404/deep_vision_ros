<launch>
  <arg name="ns" default="tracking_ros" />
  <arg name="model_type" default="vit_h" />
  <arg name="device" default="cuda:0" />

  <arg name="compressed" default="false"/>
  <arg name="input_image" default="/kinect_head/rgb/image_rect_color"/>
  <arg name="input_point" default="/$(arg ns)/processed_image/screenpoint" />
  <arg name="input_bbox" default="/$(arg ns)/processed_image/screenrectangle" />
  <arg name="processed_image" default="/$(arg ns)/processed_image"/>
  <arg name="segmentation_image" default="/$(arg ns)/segmentation_image" />
  <arg name="prompt_image" default="/$(arg ns)/prompt_image" />
  <arg name="input_segmentation" default="/$(arg ns)/input_segmentation" />
  <arg name="output_segmentation" default="/$(arg ns)/segmentation" />


  <group ns="$(arg ns)">
    <!-- process image and repub -->
    <node if="$(arg compressed)" name="raw_image_transport" pkg="image_transport" type="republish" args="compressed">
      <remap from="in" to="$(arg input_image)"/>
      <remap from="out" to="$(arg processed_image)"/>
    </node>
    <node unless="$(arg compressed)" name="raw_image_transport" pkg="image_transport" type="republish" args="raw">
      <remap from="in" to="$(arg input_image)"/>
      <remap from="out" to="$(arg processed_image)"/>
    </node>

    <!-- interactive prompter -->
    <node name="image_view2" pkg="image_view2" type="image_view2" output="screen">
      <remap from="image" to="$(arg processed_image)" />
      <param name="use_window" value="false" />
    </node>
    <node pkg="jsk_rqt_plugins" type="rqt_image_view2" name="prompter"
          output="screen">
      <remap from="event" to="image_view2/event" />
      <remap from="image_marked" to="image_marked" />
    </node>
    <node name="prompter_button"
          pkg="jsk_rqt_plugins" type="rqt_tabbed_buttons" output="screen" clear_params="true">
      <rosparam command="load" file="$(find tracking_ros)/resource/remote_tabbed_layout.yaml" />
    </node>

    <!-- visualize segmentation -->
    <node name="image_view" pkg="image_view" type="image_view" respawn="false" output="screen">
    <remap from="image" to="$(arg prompt_image)" />
    </node>

  </group>
</launch>
